<!DOCTYPE html>
<html>

<head>
  <title><%= title %></title>
  <link rel="stylesheet" href="/styles.css">
</head>

<body>
  <header>
    <h1><%= title %></h1>
    <nav>
      <span class="type-list-btns-container">
        <a href="/" class="<%= clickedTypeBtn === undefined ? 'active' : '' %> animal-type-btn">
          All
        </a>
        <a href="/?animal_type=Amphibian" class="<%= clickedTypeBtn === 'Amphibian' ? 'active' : '' %> animal-type-btn">
          Amphibian
        </a>
        <a href="/?animal_type=Bird" class="<%= clickedTypeBtn === 'Bird' ? 'active' : '' %> animal-type-btn">
          Bird
        </a>
        <a href="/?animal_type=Fish" class="<%= clickedTypeBtn === 'Fish' ? 'active' : '' %> animal-type-btn">
          Fish
        </a>
        <a href="/?animal_type=Invertebrate" class="<%= clickedTypeBtn === 'Invertebrate' ? 'active' : '' %> animal-type-btn">
          Invertebrate
        </a>
        <a href="/?animal_type=Mammal" class="<%= clickedTypeBtn === 'Mammal' ? 'active' : '' %> animal-type-btn">
          Mammal
        </a>
        <a href="/?animal_type=Reptile" class="<%= clickedTypeBtn === 'Reptile' ? 'active' : '' %> animal-type-btn">
          Reptile
        </a>
      </span>
      <span class="add-btn-container"><a href="/new-animal" class="add-new-btn">Add new</a></span>
    </nav>
  </header>
  <div class="cards-container">
    <%- countries.length ? "" : `<span class="type-not-found-text"><strong>No ${type?.toLowerCase() || "" } animal type found</strong></span>` %>
    <% countries.forEach(function (row) { %>
    <article class="card">
      <span class="card__btns">
        <a href="/update/<%= row.country_id %>-<%= row.animal_id %>-<%= row.animal_type_id %>" onclick="return authenticateUser('update')" title="Edit"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pen-fill">
            <path d="m13.5.8.1-.2a1.2 1.2 0 1 1 1.8 1.8l-.2.1a1.5 1.5 0 0 1 0 2L4.8 15a.5.5 0 0 1-.3 0l-4 1a.5.5 0 0 1-.6-.5l1-4a.5.5 0 0 1 .1-.3l9.7-9.6a.5.5 0 0 0-.7 0L7 5A.5.5 0 1 1 6 4L9.4 1a1.5 1.5 0 0 1 2.1-.1 1.5 1.5 0 0 1 2 0" />
          </svg></a>
        <a href="/delete/<%= row.country_id %>-<%= row.animal_id %>-<%= row.animal_type_id %>" onclick="return authenticateUser('delete')" title="Delete">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3-fill">
            <path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5" />
          </svg>
        </a>
      </span>
      <div class="card__country" <%= `style=background-color:hsl(${Math.floor(Math.random() * 361)},100%,10%);` %>><%= row.country %></div>
      <div class="card__animal">
        <span class="card__animal-name"><%= row.national_animal %></span>
        <span class="card__animal-type" <%= `style=background-color:hsl(${Math.floor(Math.random() * 361)},100%,10%);` %>><%= row.type %></span>
      </div>
    </article>
    <% }) %>
  </div>
  <script>
    function authenticateUser(action) {
      const password = prompt("Please enter your password");
      if (password === "0987") {
        return true;
      } else {
        alert(`Sorry, you don't have the admin privilege to ${action} the card.`);
        return false;
      };
    }
  </script>
</body>

</html>